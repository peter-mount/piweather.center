
cmd = @set -e;printf "%-8s %s\n" $1 $2

# Tool names
CP		= @cp -p
ECHO	= echo

MAKE		= $(call cmd,"MAKE","$1 $2 $3 $4 $5");make -s $1 $2 $3 $4 $5
MAKE-SUBDIR	= $(call cmd,"MAKE -C","$1 $2 $3 $4 $5");echo "Entering $1";make -s -C $1 $2 $3 $4 $5;echo "Exited $1"

MKDIR		= @mkdir -p $1

# limited to 5 entries as no way to get all args
REMOVE		= $(call cmd,"RM","$1");set +e;rm -rf $1

TAR			= @$(eval TARFILE=$(DIST_PREFIX)-$(shell echo $1 | sed "s|/|_|g").tgz)${\n}\
			  @$(eval BUILD=$(BUILDS)/$(PLATFORM))${\n}\
			  $(call cmd,"TAR",$(TARFILE));\
			  mkdir -p $(DIST);\
			  tar -P --transform "s|^$(BUILD)|$(PACKAGE_NAME)|" -czpf $(DIST)/$(TARFILE) $(BUILD)

PRINTF	= printf

# Used to separate commands in foreach.
# NOTE this MUST have 2 empty lines between define and endef for it to work!
define \n


endef
